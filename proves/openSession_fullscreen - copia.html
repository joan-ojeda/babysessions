<!DOCTYPE html>
<html>
<head>
	<title>Baby Sessions</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<link href="photoswipe.css" type="text/css" rel="stylesheet" />
		
	<!-- los actuales
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
	-->
	
	<!--OK ELIMINADO NO CAL, AFEGIM EL NOU<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>-->
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="klass.min.js"></script>
	<script type="text/javascript" src="code.photoswipe-3.0.5.js"></script>
	
	
	
	
</head>
<body>

<script type="text/javascript">
var images = [];
function getImages(json) {
  
  var fotos = [];
  var posts = json['response']['posts'];
  for (i = 0; i < posts.length; i++) {
    fotos       = posts[i]['photos'][0]['alt_sizes'];
	f_url     	= fotos[0]['url'];
	f_w      	= fotos[0]['width'];
	f_h      	= fotos[0]['height'];
	f_caption   = posts[i]['caption'];
	
	images.push({ url: f_url, caption: f_caption });
  }
  
  //alert(images);
 
 	(function(window, PhotoSwipe){
		
			document.addEventListener('DOMContentLoaded', function(){

				var	
					options = {
						preventHide: false,
						enableKeyboard:false,
						enableMouseWheel:false,
						loop:true,
						slideshowDelay:2000,
						margin:20,
						allowUserZoom:false,
						jQueryMobile:true,
						backButtonHideEnabled:false,
						captionAndToolbarFlipPosition:true,
						captionAndToolbarAutoHideDelay:0,
						captionAndToolbarOpacity:1,
						getImageSource: function(obj){
							return obj.url;
						},
						getImageCaption: function(obj){
							//var captionEL; 
							//captionEl = document.createElement('div');
							//captionEl.style.cssText = 'font-color=orange;font-size: 50px; font-weight: bold; padding: 5px;';
							//captionEl.appendChild(document.createTextNode(obj.caption));
							//return captionEl;
							return obj.caption;
						}
						
						
					};
					
					var instance = PhotoSwipe.attach( images, options );
					
					// onShow - store a reference to our "Audio" button
					//var	doAudio;
					//instance.addEventHandler(PhotoSwipe.EventTypes.onShow, function(e){
					//	doAudio = window.document.querySelectorAll('.ps-toolbar-audio')[0];
					//});
					
					// onToolbarTap - listen out for when the toolbar is tapped
					//instance.addEventHandler(PhotoSwipe.EventTypes.onToolbarTap, function(e){
					//	if (e.toolbarAction === PhotoSwipe.Toolbar.ToolbarAction.none){
					//		if (e.tapTarget === doAudio || Util.DOM.isChildOf(e.tapTarget, doAudio)){
					//			alert('Sonido');
					//		}
					//	}
					//});
					
					//onBeforeHide - clean up
					//instance.addEventHandler(PhotoSwipe.EventTypes.onBeforeHide, function(e){
					//	doAudio = null;
					//});
					
					
					instance.show(0);
					
			}, false);
			
			
		}(window, window.Code.PhotoSwipe));
}  
</script>
<script type="text/javascript" src="http://api.tumblr.com/v2/blog/bscolors.tumblr.com/posts?api_key=XdsfPCwtsTQUTbvWOUfdTGKnryYZ3jtz3U0lZpQtC3ELwIRgFx&jsonp=getImages&type=photo"></script>

</body>
</html>
